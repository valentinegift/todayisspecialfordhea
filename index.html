<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- happy valentine for u Placeholder untuk judul -->
    <title>happy valentine for u</title>
    <link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Chewy', cursive;
            background-image: url('https://files.catbox.moe/z98knb.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            overflow-x: hidden;
            color: #000;
            touch-action: pan-y;
        }

        .color-1 { color: #8FC9FF; }
        .color-2 { color: #A2D2FF; }
        .color-3 { color: #BDE0FE; }
        .color-4 { color: #D1E8FC; }
        .color-5 { color: #E5F0FA; }

        .page {
            display: none;
            min-height: 100vh;
            padding: 20px 15px;
            text-align: center;
        }

        .page.active {
            display: block;
        }

        .valentine-container {
            max-width: 100%;
            margin: 0 auto;
            padding-top: 20px;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heart-icon {
            width: 50px;
            height: 50px;
            background-image: url('https://files.catbox.moe/5fcno9.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
        }

        .greeting {
            font-size: clamp(2rem, 8vw, 3.5rem);
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
            word-break: break-word;
            line-height: 1.2;
        }

        .name-placeholder {
            color: #A2D2FF;
            display: inline-block;
            animation: pulse 2s infinite;
            padding: 0 5px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .gif-container {
            margin: 20px auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            max-width: 95%;
        }

        .valentine-gif {
            width: 100%;
            height: auto;
            display: block;
            max-height: 60vh;
            object-fit: contain;
        }

        .question {
            font-size: clamp(1.8rem, 6vw, 2.8rem);
            margin: 25px 0;
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
            padding: 0 10px;
            line-height: 1.3;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 40px;
            font-size: clamp(1.5rem, 5vw, 2rem);
            font-family: 'Chewy', cursive;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            min-width: 140px;
            touch-action: manipulation;
        }

        .yes-btn {
            background-color: #A2D2FF;
            color: #000;
        }

        .yes-btn:active {
            transform: scale(0.95);
        }

        .no-btn {
            background-color: #D1E8FC;
            color: #000;
        }

        .no-btn:active {
            transform: scale(0.95);
        }

        .heart-rain {
            position: fixed;
            top: -100px;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            display: none;
        }

        .heart-rain.active {
            display: block;
        }

        .falling-heart {
            position: absolute;
            width: 30px;
            height: 30px;
            background-image: url('https://files.catbox.moe/h0cxxb.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.8;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .sad-gif-container {
            display: none;
            margin: 20px auto;
            max-width: 90%;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .sad-gif-container.show {
            display: block;
        }

        .sad-gif {
            width: 100%;
            height: auto;
            display: block;
            max-height: 50vh;
            object-fit: contain;
        }

        .letter-container {
            max-width: 95%;
            margin: 0 auto;
            padding: 25px 20px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            margin-top: 20px;
        }

        .page-title {
            font-size: clamp(2.2rem, 7vw, 3rem);
            margin-bottom: 25px;
            color: #8FC9FF;
        }

        .letter-content {
            font-size: clamp(1.3rem, 4.5vw, 1.8rem);
            line-height: 1.6;
            text-align: left;
            min-height: 200px;
            padding: 20px;
            border-left: 4px solid #A2D2FF;
            background-color: rgba(226, 240, 255, 0.3);
            border-radius: 0 12px 12px 0;
            overflow-wrap: break-word;
            word-break: break-word;
            white-space: pre-wrap;
        }

        .typed-text {
            display: inline;
        }

        .cursor {
            display: inline-block;
            width: 2px;
            background-color: #8FC9FF;
            margin-left: 3px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .memories-btn-container {
            margin-top: 40px;
        }

        .memories-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 18px 30px;
            font-size: clamp(1.5rem, 5vw, 2rem);
            background-color: #A2D2FF;
            border-radius: 50px;
            text-decoration: none;
            color: #000;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 350px;
            touch-action: manipulation;
        }

        .memories-btn:active {
            transform: scale(0.98);
        }

        .memory-icon {
            width: 35px;
            height: 35px;
            background-image: url('https://files.catbox.moe/o3xnih.png');
            background-size: contain;
            background-repeat: no-repeat;
            flex-shrink: 0;
        }

        .memories-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px 10px;
        }

        .photos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
            padding: 0 10px;
        }

        .photo-item {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
            aspect-ratio: 1/1;
        }

        .photo-item:active {
            transform: scale(0.98);
        }

        .memory-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .song-section {
            margin-top: 50px;
            padding: 25px 15px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 95%;
            margin-left: auto;
            margin-right: auto;
        }

        .song-title {
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            margin-bottom: 20px;
            color: #8FC9FF;
        }

        .spotify-player {
            width: 100%;
            border-radius: 12px;
            overflow: hidden;
            margin: 0 auto;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .back-btn {
            position: fixed;
            top: 15px;
            left: 15px;
            padding: 10px 20px;
            background-color: rgba(162, 210, 255, 0.95);
            border-radius: 50px;
            text-decoration: none;
            color: #000;
            font-size: clamp(1rem, 4vw, 1.2rem);
            z-index: 100;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
            touch-action: manipulation;
            backdrop-filter: blur(5px);
        }

        .back-btn:active {
            transform: scale(0.95);
        }

        .mobile-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #8FC9FF;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .mobile-loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-heart {
            width: 60px;
            height: 60px;
            background-image: url('https://files.catbox.moe/h0cxxb.png');
            background-size: contain;
            background-repeat: no-repeat;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @media (orientation: landscape) and (max-height: 600px) {
            .valentine-container {
                padding-top: 10px;
            }
            
            .gif-container {
                max-width: 60%;
                margin: 10px auto;
            }
            
            .buttons {
                margin-top: 15px;
            }
            
            .btn {
                padding: 12px 30px;
            }
            
            .letter-container {
                padding: 15px;
                margin-top: 10px;
            }
            
            .photos-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }

        @media (min-width: 768px) {
            .page {
                padding: 30px 20px;
            }
            
            .photos-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
            }
            
            .letter-container {
                max-width: 85%;
                padding: 30px;
            }
            
            .song-section {
                width: 85%;
            }
        }

        @media (min-width: 1024px) {
            .page {
                padding: 40px;
            }
            
            .photos-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 30px;
            }
            
            .letter-container {
                max-width: 800px;
            }
            
            .song-section {
                max-width: 800px;
            }
        }

        @media (max-width: 360px) {
            .btn {
                padding: 14px 30px;
                min-width: 120px;
            }
            
            .photos-grid {
                grid-template-columns: 1fr;
            }
            
            .memory-icon {
                width: 30px;
                height: 30px;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile loading screen -->
    <div class="mobile-loading" id="mobileLoading">
        <div class="loading-heart"></div>
    </div>

    <!-- Page 1: Valentine Proposal -->
    <div class="page active" id="page1">
        <div class="valentine-container">
            <div class="header">
                <!-- FOR DHEAA SI BADDIE Placeholder untuk nama -->
                <h1 class="greeting color-4">Hi, <span class="name-placeholder" id="namePlaceholder">FOR DHEAA SI BADDIE</span></h1>
                <div class="heart-icon"></div>
            </div>
            
            <div class="gif-container">
                <video class="valentine-gif" autoplay loop muted playsinline preload="auto">
                    <source src="https://files.catbox.moe/5bu3jz.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            
            <h2 class="question color-3">will you be my valentine?</h2>
            
            <div class="buttons">
                <button class="btn yes-btn" id="yesBtn">YES!</button>
                <button class="btn no-btn" id="noBtn">no</button>
            </div>
            
            <!-- GIF ketika jawaban NO -->
            <div class="sad-gif-container" id="sadGif">
                <video class="sad-gif" autoplay loop muted playsinline>
                    <source src="https://files.catbox.moe/16ww3w.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
        
        <!-- Hujan hati -->
        <div class="heart-rain" id="heartRain"></div>
    </div>
    
    <!-- Page 2: Valentine Letter -->
    <div class="page" id="page2">
        <a href="#page1" class="back-btn" id="backToPage1">‚Üê Back</a>
        
        <div class="letter-container">
            <h2 class="page-title">My Valentine Letter</h2>
            
            <div class="letter-content" id="typedLetter">
                <!-- we have been friends for not too long but I feel like we have been friends for several years, setiap hari aku selalu bersyukur karna aku bisa menjadi temanmu. kamu selalu ada di sisiku apapun kondisinya. you are a wonderful and charming person and anyone would be very lucky to know you. you are my sister from another mother. you are like my other half and without you as my best friend I would be so sad and incomplete. I can&#39;t wait to see you in person in the real world. you should know that every day I am so happy to know that I have an amazing and beautiful best friend like you, I love you to death, girl!!! I thank god every day for allowing you to come into my life.. I love you ü§ç<br>hii dheaa geulis, want to tell u  <br>30 reason why i love u :3 ‚≠êÔ∏è<br><br>1. you make me feel safe and secure.<br>2. you understand me better than anyone else.<br>3. your smile brightens my day.<br>4. you always know how to make me laugh.<br>5. you make me feel special<br>6. you believe in me<br>7. you show me love in ways I‚Äôve never known.<br>8. you‚Äôre kind to others<br>9. you‚Äôre thoughtful<br>10. you always appreciate me.<br>11. you push me to be a better version of myself.<br>12. you support my dreams<br>13. you‚Äôre patient with me<br>14. you accept me as I am<br>15. you listen to me.<br>16. you‚Äôre generous<br>17. you are my best friend and my greatest love.<br>18. you make me feel understood and valued.<br>19. you make me feel like I‚Äôm enough.<br>20. you take care of me, physically and emotionally.<br>21. you bring calm and peace when I‚Äôm feeling anxious.<br>22. you always know how to make me feel special.<br>23. you always protect me <br>24. you always open a new experiences.<br>25. you remember the little things that mean so much to me.<br>26. you care about my happiness as much as your own.<br>27. you respect me and my boundaries.<br>28. you make me feel like I‚Äôm your priority.<br>29. you‚Äôve shown me what real love is.<br>30. you make me laugh when i‚Äôm feeling blue. Placeholder untuk surat cinta -->
                we have been friends for not too long but I feel like we have been friends for several years, setiap hari aku selalu bersyukur karna aku bisa menjadi temanmu. kamu selalu ada di sisiku apapun kondisinya. you are a wonderful and charming person and anyone would be very lucky to know you. you are my sister from another mother. you are like my other half and without you as my best friend I would be so sad and incomplete. I can&#39;t wait to see you in person in the real world. you should know that every day I am so happy to know that I have an amazing and beautiful best friend like you, I love you to death, girl!!! I thank god every day for allowing you to come into my life.. I love you ü§ç<br>hii dheaa geulis, want to tell u  <br>30 reason why i love u :3 ‚≠êÔ∏è<br><br>1. you make me feel safe and secure.<br>2. you understand me better than anyone else.<br>3. your smile brightens my day.<br>4. you always know how to make me laugh.<br>5. you make me feel special<br>6. you believe in me<br>7. you show me love in ways I‚Äôve never known.<br>8. you‚Äôre kind to others<br>9. you‚Äôre thoughtful<br>10. you always appreciate me.<br>11. you push me to be a better version of myself.<br>12. you support my dreams<br>13. you‚Äôre patient with me<br>14. you accept me as I am<br>15. you listen to me.<br>16. you‚Äôre generous<br>17. you are my best friend and my greatest love.<br>18. you make me feel understood and valued.<br>19. you make me feel like I‚Äôm enough.<br>20. you take care of me, physically and emotionally.<br>21. you bring calm and peace when I‚Äôm feeling anxious.<br>22. you always know how to make me feel special.<br>23. you always protect me <br>24. you always open a new experiences.<br>25. you remember the little things that mean so much to me.<br>26. you care about my happiness as much as your own.<br>27. you respect me and my boundaries.<br>28. you make me feel like I‚Äôm your priority.<br>29. you‚Äôve shown me what real love is.<br>30. you make me laugh when i‚Äôm feeling blue.
            </div>
            
            <div class="memories-btn-container">
                <a href="#page3" class="memories-btn" id="memoriesBtn">
                    <div class="memory-icon"></div>
                    <span>Our Memories</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Page 3: Our Memories -->
    <div class="page" id="page3">
        <a href="#page2" class="back-btn" id="backToPage2">‚Üê Back</a>
        
        <div class="memories-container">
            <h2 class="page-title">Our Memories</h2>
            
            <div class="photos-grid" id="photosGrid">
                <!-- 
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078069.jpg" alt="Memory 1" class="memory-photo" loading="lazy">
                </div>
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078071.jpg" alt="Memory 2" class="memory-photo" loading="lazy">
                </div>
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078073.jpg" alt="Memory 3" class="memory-photo" loading="lazy">
                </div>
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078074.jpg" alt="Memory 4" class="memory-photo" loading="lazy">
                </div> Placeholder untuk foto-foto -->
                
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078069.jpg" alt="Memory 1" class="memory-photo" loading="lazy">
                </div>
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078071.jpg" alt="Memory 2" class="memory-photo" loading="lazy">
                </div>
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078073.jpg" alt="Memory 3" class="memory-photo" loading="lazy">
                </div>
                <div class="photo-item">
                    <img src="images/photo_8517975493_1771078074.jpg" alt="Memory 4" class="memory-photo" loading="lazy">
                </div>
            </div>
            
            <div class="song-section">
                <h3 class="song-title">A Song For You</h3>
                <div class="spotify-player" id="spotifyPlayerContainer">
                    <!-- 
            <div class="spotify-player">
                <iframe src="https://open.spotify.com/embed/track/0Y7dCFSIdB9vJ8nnVIAfuv" 
                        width="100%" 
                        height="352" 
                        frameborder="0" 
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                        style="border-radius: 12px;"
                        loading="lazy">
                </iframe>
            </div> Placeholder untuk musik Spotify -->
                    
            <div class="spotify-player">
                <iframe src="https://open.spotify.com/embed/track/0Y7dCFSIdB9vJ8nnVIAfuv" 
                        width="100%" 
                        height="352" 
                        frameborder="0" 
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                        style="border-radius: 12px;"
                        loading="lazy">
                </iframe>
            </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileLoading = document.getElementById('mobileLoading');
            
            // Sembunyikan loading screen setelah semua konten dimuat
            setTimeout(() => {
                mobileLoading.classList.add('hidden');
            }, 1500);
            
            // Inisialisasi variabel setelah loading
            setTimeout(initializeApp, 100);
        });

        function initializeApp() {
            // Elemen penting
            const page1 = document.getElementById('page1');
            const page2 = document.getElementById('page2');
            const page3 = document.getElementById('page3');
            const yesBtn = document.getElementById('yesBtn');
            const noBtn = document.getElementById('noBtn');
            const sadGif = document.getElementById('sadGif');
            const heartRain = document.getElementById('heartRain');
            const typedLetter = document.getElementById('typedLetter');
            const memoriesBtn = document.getElementById('memoriesBtn');
            const backToPage1 = document.getElementById('backToPage1');
            const backToPage2 = document.getElementById('backToPage2');
            const namePlaceholder = document.getElementById('namePlaceholder');
            const spotifyPlayerContainer = document.getElementById('spotifyPlayerContainer');
            const photosGrid = document.getElementById('photosGrid');
            
            // Respons untuk tombol YES
            yesBtn.addEventListener('click', function() {
                // Haptic feedback untuk mobile
                if ('vibrate' in navigator) {
                    navigator.vibrate([50, 50, 100]);
                }
                
                // Memulai hujan hati
                createHeartRain();
                
                // Pindah ke halaman 2 setelah delay
                setTimeout(function() {
                    page1.classList.remove('active');
                    page2.classList.add('active');
                    
                    // Scroll ke atas
                    window.scrollTo({top: 0, behavior: 'smooth'});
                    
                    // Mulai animasi ketik untuk surat
                    const letterText = typedLetter.textContent.trim();
                    
                    // FIX: Cek jika text valid (bukan placeholder dan panjangnya cukup)
                    if (letterText && !letterText.includes('we have been friends for not too long but I feel like we have been friends for several years, setiap hari aku selalu bersyukur karna aku bisa menjadi temanmu. kamu selalu ada di sisiku apapun kondisinya. you are a wonderful and charming person and anyone would be very lucky to know you. you are my sister from another mother. you are like my other half and without you as my best friend I would be so sad and incomplete. I can&#39;t wait to see you in person in the real world. you should know that every day I am so happy to know that I have an amazing and beautiful best friend like you, I love you to death, girl!!! I thank god every day for allowing you to come into my life.. I love you ü§ç<br>hii dheaa geulis, want to tell u  <br>30 reason why i love u :3 ‚≠êÔ∏è<br><br>1. you make me feel safe and secure.<br>2. you understand me better than anyone else.<br>3. your smile brightens my day.<br>4. you always know how to make me laugh.<br>5. you make me feel special<br>6. you believe in me<br>7. you show me love in ways I‚Äôve never known.<br>8. you‚Äôre kind to others<br>9. you‚Äôre thoughtful<br>10. you always appreciate me.<br>11. you push me to be a better version of myself.<br>12. you support my dreams<br>13. you‚Äôre patient with me<br>14. you accept me as I am<br>15. you listen to me.<br>16. you‚Äôre generous<br>17. you are my best friend and my greatest love.<br>18. you make me feel understood and valued.<br>19. you make me feel like I‚Äôm enough.<br>20. you take care of me, physically and emotionally.<br>21. you bring calm and peace when I‚Äôm feeling anxious.<br>22. you always know how to make me feel special.<br>23. you always protect me <br>24. you always open a new experiences.<br>25. you remember the little things that mean so much to me.<br>26. you care about my happiness as much as your own.<br>27. you respect me and my boundaries.<br>28. you make me feel like I‚Äôm your priority.<br>29. you‚Äôve shown me what real love is.<br>30. you make me laugh when i‚Äôm feeling blue.') && letterText.length > 10) {
                        typedLetter.innerHTML = '';
                        typeWriter(letterText, 0, typedLetter);
                    }
                }, 3000);
            });
            
            // Respons untuk tombol NO
            let clickCount = 0;
            noBtn.addEventListener('click', function() {
                // Haptic feedback
                if ('vibrate' in navigator) {
                    navigator.vibrate([100]);
                }
                
                clickCount++;
                
                // Tampilkan GIF sedih
                sadGif.classList.add('show');
                
                // Ubah teks tombol NO dengan berbagai jawaban
                const noTexts = [
                    "Are you sure?",
                    "Really sure?",
                    "Think again!",
                    "Last chance!",
                    "Surely not?",
                    "You're breaking my heart!",
                    "Please? ü•∫",
                    "I'll be sad!",
                    "Pretty please?",
                    "Final answer?"
                ];
                
                if (clickCount <= noTexts.length) {
                    noBtn.textContent = noTexts[clickCount - 1];
                }
                
                // Buat tombol YES sedikit lebih besar
                const scale = 1 + (clickCount * 0.1);
                yesBtn.style.transform = `scale(${scale})`;
                
                // Jika diklik terlalu banyak, paksa ke YES
                if (clickCount >= 8) {
                    yesBtn.click();
                }
            });
            
            // Fungsi untuk membuat hujan hati
            function createHeartRain() {
                heartRain.classList.add('active');
                
                // Jumlah hati berdasarkan ukuran layar
                const heartCount = window.innerWidth < 768 ? 30 : 50;
                
                // Buat hati yang jatuh
                for (let i = 0; i < heartCount; i++) {
                    const heart = document.createElement('div');
                    heart.classList.add('falling-heart');
                    
                    // Posisi acak
                    const leftPos = Math.random() * 100;
                    const size = window.innerWidth < 768 ? 15 + Math.random() * 25 : 20 + Math.random() * 40;
                    const fallDuration = 2 + Math.random() * 3;
                    const delay = Math.random() * 2;
                    
                    heart.style.left = `${leftPos}%`;
                    heart.style.width = `${size}px`;
                    heart.style.height = `${size}px`;
                    heart.style.animationDuration = `${fallDuration}s`;
                    heart.style.animationDelay = `${delay}s`;
                    
                    heartRain.appendChild(heart);
                    
                    // Hapus hati setelah selesai animasi
                    setTimeout(() => {
                        if (heart.parentNode) {
                            heart.remove();
                        }
                    }, (fallDuration + delay) * 1000);
                }
            }
            
            // Fungsi animasi ketik
            function typeWriter(text, index, element) {
                if (index < text.length) {
                    // Jika karakter baru adalah newline, buat element <br>
                    if (text.charAt(index) === '\n') {
                        element.innerHTML += '<br>';
                    } else {
                        // Tambahkan karakter baru
                        const charSpan = document.createElement('span');
                        charSpan.className = 'typed-text';
                        charSpan.textContent = text.charAt(index);
                        element.appendChild(charSpan);
                    }
                    
                    // Tambahkan kursor berkedip
                    const cursor = document.createElement('span');
                    cursor.classList.add('cursor');
                    element.appendChild(cursor);
                    
                    // Hapus kursor sebelumnya
                    const prevCursors = element.querySelectorAll('.cursor');
                    if (prevCursors.length > 1) {
                        for (let i = 0; i < prevCursors.length - 1; i++) {
                            prevCursors[i].remove();
                        }
                    }
                    
                    // Delay untuk efek mengetik
                    let delay = 30; // ms
                    
                    // Delay lebih lama untuk tanda baca
                    if (text.charAt(index) === '.' || text.charAt(index) === '!' || text.charAt(index) === '?') {
                        delay = 500;
                    } else if (text.charAt(index) === ',') {
                        delay = 200;
                    }
                    
                    setTimeout(function() {
                        typeWriter(text, index + 1, element);
                    }, delay);
                } else {
                    // Hapus kursor setelah selesai
                    const cursor = element.querySelector('.cursor');
                    if (cursor) cursor.remove();
                }
            }
            
            // Navigasi antar halaman dengan smooth scroll
            memoriesBtn.addEventListener('click', function(e) {
                e.preventDefault();
                page2.classList.remove('active');
                page3.classList.add('active');
                window.scrollTo({top: 0, behavior: 'smooth'});
            });
            
            backToPage1.addEventListener('click', function(e) {
                e.preventDefault();
                page2.classList.remove('active');
                page1.classList.add('active');
                window.scrollTo({top: 0, behavior: 'smooth'});
                
                // Reset state
                sadGif.classList.remove('show');
                noBtn.textContent = "no";
                yesBtn.style.transform = "scale(1)";
                clickCount = 0;
            });
            
            backToPage2.addEventListener('click', function(e) {
                e.preventDefault();
                page3.classList.remove('active');
                page2.classList.add('active');
                window.scrollTo({top: 0, behavior: 'smooth'});
            });
            
            // Event listeners untuk touch devices
            document.addEventListener('touchstart', function() {}, {passive: true});
            
            // Cegah zoom pada tombol
            document.querySelectorAll('button, a').forEach(element => {
                element.addEventListener('touchstart', function(e) {
                    e.stopPropagation();
                }, {passive: true});
            });
            
            // Kode untuk bot Telegram: ganti bagian ini dengan nama pengguna
            // Dapatkan parameter dari URL (untuk bot Telegram)
            const urlParams = new URLSearchParams(window.location.search);
            const name = urlParams.get('name');
            if (name) {
                namePlaceholder.textContent = name;
            }
        }
    </script>
</body>
</html>